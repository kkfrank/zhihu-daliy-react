/*! Copyright by frank */
webpackJsonp([0],[,,,,,,,,,function(e,t,n){"use strict";function o(){return{type:u.SHOW_LOADING}}function r(){return{type:u.HIDE_LOADING}}function a(e){return{type:u.SET_ERROR_MSG,errorMsg:e}}function l(){return{type:u.CLEAR_ERROR_MSG}}Object.defineProperty(t,"__esModule",{value:!0}),t.showLoading=o,t.hideLoading=r,t.setErrorMsg=a,t.clearErrorMsg=l;var u=n(27)},,,,,,function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(u);n(71);var c=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"loading-container "+(this.props.isFull?"is-full":"")},i.default.createElement("div",{className:"loading-mask"}),i.default.createElement("div",{className:"loading-box"},i.default.createElement("span",null),i.default.createElement("span",null),i.default.createElement("span",null),i.default.createElement("span",null)))}}]),t}(u.Component);t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(u);n(72);var c=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={confirmLoading:!1},n.onOk=n.onOk.bind(n),n.onCancel=n.onCancel.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n}return a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this.modalContentRef.focus(),this.maskRef.onclick=function(){e.onCancel()}}},{key:"handleKeyDown",value:function(e){27===e.keyCode&&this.onCancel()}},{key:"onOk",value:function(){if(!this.props.confirmLoading){var e=this.props.onOk;"function"==typeof e&&e()}}},{key:"onCancel",value:function(){var e=this.props.onCancel;"function"==typeof e&&e()}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,o=t.children,r=this.props,a=r.visible,l=r.confirmLoading;return n=n||"提示",i.default.createElement("div",{className:"modal-box "+(a?"":"hide")},i.default.createElement("div",{className:"modal-mask",ref:function(t){return e.maskRef=t}}),i.default.createElement("div",{className:"modal-content",ref:function(t){return e.modalContentRef=t},tabIndex:"0",onKeyDown:this.handleKeyDown},i.default.createElement("div",{className:"modal-header"},n,i.default.createElement("i",{onClick:this.onCancel,className:"right"},"x")),i.default.createElement("div",{className:"modal-body"},o),i.default.createElement("div",{className:"modal-footer"},i.default.createElement("button",{onClick:this.onCancel,className:"btn default mr10"},"取消"),i.default.createElement("button",{onClick:this.onOk,className:"btn "+(l?"disabled":"")},"确定"))))}}]),t}(u.Component);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(35),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a="";a="https://cors-anywhere.herokuapp.com/https://news-at.zhihu.com/api/4",t.default={post:function(e,t,n){return new Promise(function(t,n){(0,r.default)(a+e,{method:"POST"}).then(function(e){return t(e.json())}).catch(function(e){n({message:e})})})},get:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(t,n){(0,r.default)(a+e,{method:"GET"}).then(function(e){return t(e.json())}).catch(function(e){return n({message:e})})})}}},function(e,t,n){"use strict";function o(e){var t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate();return n<10&&(n="0"+n),o<10&&(o="0"+o),t+n+o}function r(e){var t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),r=e.getHours(),a=e.getMinutes();return n<10&&(n="0"+n),o<10&&(o="0"+o),r<10&&(r="0"+r),a<10&&(a="0"+a),t+"-"+n+"-"+o+" "+r+":"+a}function a(e){if(!/^(\d){8}$/.test(e))throw"invalid date";var t=e.substr(0,4),n=e.substr(4,2)-1,o=e.substr(6,2);return new Date(t,n,o)}function l(e,t){var n=e.getTime(),o=new Date(n+24*t*60*60*1e3),r=new Date;return r.setTime(o.getTime()),r}function u(e){c=function(){var t=document.documentElement.scrollTop||document.body.scrollTop;0!==t&&t+document.documentElement.clientHeight===document.documentElement.scrollHeight&&e()},window.addEventListener("scroll",c)}function i(){window.removeEventListener("scroll",c)}Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=o,t.formatDate2=r,t.parseDate=a,t.addDays=l,t.listenScrollBottom=u,t.removeListenScrollBottom=i;var c},,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SHOW_LOADING="SHOW_LOADING",t.HIDE_LOADING="HIDE_LOADING",t.SET_ERROR_MSG="SET_ERROR_MSG",t.CLEAR_ERROR_MSG="CLEAR_ERROR_MSG"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GET_LATEST_NEWS="GET_LATEST_NEWS",t.GET_BEFORE_NEWS="GET_BEFORE_NEWS",t.SAVE_SCROLLTOP="SAVE_SCROLLTOP"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GET_NEWS_DETAIL="GET_NEWS_DETAIL",t.GET_NEWS_EXTRA="GET_NEWS_EXTRA"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GET_SHORT_COMMENT_LIST="GET_SHORT_COMMENT_LIST",t.GET_LONG_COMMENT_LIST="GET_LONG_COMMENT_LIST",t.GET_SHORT_COMMENT_LIST_BEFORE="GET_SHORT_COMMENT_LIST_BEFORE",t.GET_LONG_COMMENT_LIST_BEFORE="GET_LONG_COMMENT_LIST_BEFORE"},,,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,i,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(0),f=o(s),d=(n(4),n(1));o(d);n(73);var m=(i=u=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,o=e.title;return f.default.createElement("div",{className:"header "+t},this.props.goBack&&f.default.createElement("a",{className:"goback",onClick:this.props.goBack},f.default.createElement("i",{className:"fa fa-chevron-left"})),o&&f.default.createElement("h1",null,o),n)}}]),t}(s.Component),u.propTypes={},i);t.default=m},function(e,t,n){"use strict";function o(e){return function(t,n){t((0,u.showLoading)()),l.default.get("/news/"+e).then(function(e){t({type:i.GET_NEWS_DETAIL,data:e}),t((0,u.hideLoading)())}).catch(function(e){t((0,u.setErrorMsg)(e.message))})}}function r(e){return function(t,n){t((0,u.showLoading)()),l.default.get("/story-extra/"+e).then(function(e){t({type:i.GET_NEWS_EXTRA,data:e}),t((0,u.hideLoading)())}).catch(function(e){t((0,u.setErrorMsg)(e.message))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.getNewsDetail=o,t.getNewsExtra=r;var a=n(17),l=function(e){return e&&e.__esModule?e:{default:e}}(a),u=n(9),i=n(29)},,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n(0),a=o(r),l=n(22),u=o(l),i=n(10),c=n(57),s=o(c),f=n(63),d=o(f);n(86),u.default.render(a.default.createElement(i.Provider,{store:s.default},a.default.createElement(d.default,null)),document.getElementById("app"))},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=(o(r),n(12)),l=n(26),u=o(l),i=n(58),c=o(i),s=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||a.compose,f=(0,a.createStore)(c.default,s((0,a.applyMiddleware)(u.default)));t.default=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),a=n(59),l=o(a),u=n(60),i=o(u),c=n(61),s=o(c),f=n(62),d=o(f);t.default=(0,r.combineReducers)({loadingError:l.default,newsList:i.default,newsDetail:s.default,commentList:d.default})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(27),a={loading:!1,errorMsg:""};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case r.SHOW_LOADING:return o({},e,{loading:!0,errorMsg:""});case r.HIDE_LOADING:return o({},e,{loading:!1});case r.SET_ERROR_MSG:return o({},e,{loading:!1,errorMsg:t.errorMsg});case r.CLEAR_ERROR_MSG:return o({},e,{errorMsg:""});default:return e}}},function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){return e.map(function(e){return a({},e,{date:t})})}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=n(28),u={nowDate:null,scrollTop:0,topStoryList:[],storyList:[]};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case l.GET_LATEST_NEWS:return a({},e,{nowDate:t.data.date,topStoryList:t.data.top_stories,storyList:[].concat(o(e.storyList),o(r(t.data.stories,t.data.date)))});case l.GET_BEFORE_NEWS:return a({},e,{nowDate:t.data.date,storyList:[].concat(o(e.storyList),o(r(t.data.stories,t.data.date)))});case l.SAVE_SCROLLTOP:return a({},e,{scrollTop:t.value});default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(29),a={body:"",title:"",image:"",imageSource:"",extra:{longCommentCount:0,popularityCount:0,shortCommentCount:0,commentCount:0}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case r.GET_NEWS_DETAIL:return o({},e,{body:t.data.body,title:t.data.title,image:t.data.image,imageSource:t.data.image_source});case r.GET_NEWS_EXTRA:return o({},e,{extra:{longCommentCount:t.data.long_comments,popularityCount:t.data.popularity,shortCommentCount:t.data.short_comments,commentCount:t.data.comments}});default:return e}}},function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(30),l={shortCommentList:[],longCommentList:[]};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case a.GET_SHORT_COMMENT_LIST:return r({},e,{shortCommentList:t.data.comments});case a.GET_LONG_COMMENT_LIST:return r({},e,{longCommentList:t.data.comments});case a.GET_SHORT_COMMENT_LIST_BEFORE:return r({},e,{shortCommentList:[].concat(o(e.shortCommentList),o(t.data.comments))});case a.GET_LONG_COMMENT_LIST_BEFORE:return r({},e,{longCommentList:[].concat(o(e.longCommentList),o(t.data.comments))});default:return e}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=o(r),l=n(4),u=n(68),i=o(u),c=n(76),s=o(c),f=n(83),d=o(f);t.default=function(){return a.default.createElement(l.HashRouter,null,a.default.createElement("div",null,a.default.createElement(l.Route,{exact:!0,path:"/",component:s.default}),a.default.createElement(l.Route,{exact:!0,path:"/details/:id",component:i.default}),a.default.createElement(l.Route,{path:"/details/:id/comments",component:d.default})))}},,,,,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,i,c,s,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=n(0),m=o(d),p=n(10),E=n(4),h=n(1),g=o(h),_=n(15),v=o(_),y=n(16),b=o(y),O=n(33),w=o(O),L=n(34),N=n(9);n(75);var T=(u=(0,p.connect)(function(e){return{newsDetail:e.newsDetail,loadingError:e.loadingError}},function(e){return{getNewsDetailFunc:function(t){e((0,L.getNewsDetail)(t))},getNewsExtraFunc:function(t){e((0,L.getNewsExtra)(t))},clearErrorMsgFunc:function(){e((0,N.clearErrorMsg)())}}}))((s=c=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return l(t,e),f(t,[{key:"componentDidMount",value:function(){document.documentElement.scrollTop=0;var e=this.props.match.params.id;this.props.getNewsDetailFunc(e),this.props.getNewsExtraFunc(e)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.loadingError,n=t.loading,o=t.errorMsg,r=this.props.newsDetail,a=r.title,l=r.body,u=r.image,i=r.imageSource,c=r.extra;return m.default.createElement("div",{className:"detail-box"},o&&m.default.createElement(b.default,{onOk:function(){return e.props.clearErrorMsgFunc()},onCancel:function(){return e.props.clearErrorMsgFunc()},title:"对话框",visible:!!o},m.default.createElement("p",null,o)),n&&m.default.createElement(v.default,null),m.default.createElement(w.default,{goBack:this.props.history.goBack,className:"detail-header"},m.default.createElement("div",{className:"line"}),m.default.createElement("div",{className:"right ml30"},m.default.createElement(E.Link,{to:"/details/"+this.props.match.params.id+"/comments",className:"func-btn"},m.default.createElement("i",{className:"fa fa-comment-o"}),m.default.createElement("span",null,c.commentCount)),m.default.createElement("div",{className:"func-btn"},m.default.createElement("i",{className:"fa fa-thumbs-o-up"}),m.default.createElement("span",null,c.popularityCount)))),m.default.createElement("div",{className:"detail-img-box"},m.default.createElement("img",{src:u}),m.default.createElement("div",{className:"detail-overlay"}),m.default.createElement("h2",null,a),m.default.createElement("span",null,i)),m.default.createElement("div",{dangerouslySetInnerHTML:{__html:l},className:"detail-content-box"}))}}]),t}(d.Component),c.propTypes={newsDetail:g.default.object,loadingError:g.default.object,getNewsDetailFunc:g.default.func,getNewsExtraFunc:g.default.func,clearErrorMsgFunc:g.default.func},i=s))||i;t.default=T},,,function(e,t){},function(e,t){},function(e,t){},,function(e,t){},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,i,c,s,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=n(0),m=o(d),p=n(10),E=(n(4),n(1)),h=o(E),g=n(15),_=o(g),v=n(16),y=o(v),b=n(77),O=o(b),w=n(79),L=o(w),N=n(81),T=n(9),M=n(18);n(82);var S=(u=(0,p.connect)(function(e){return{newsList:e.newsList,loadingError:e.loadingError}},function(e){return{getLatestNewsFunc:function(){return e((0,N.getLatestNews)())},getBeforeNewsFunc:function(){e((0,N.getBeforeNews)())},saveScrollTopFunc:function(t){e((0,N.saveScrollTop)(t))},clearErrorMsgFunc:function(){e((0,T.clearErrorMsg)())}}}))((s=c=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.jumpDetail=n.jumpDetail.bind(n),n.addEvent=n.addEvent.bind(n),n}return l(t,e),f(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.newsList,n=t.storyList,o=t.scrollTop;if(console.log("list componentDidMount",o),this.addEvent(),n.length>0)return void(document.documentElement.scrollTop=o);this.props.getLatestNewsFunc().then(function(){e.props.getBeforeNewsFunc()})}},{key:"addEvent",value:function(){(0,M.listenScrollBottom)(this.props.getBeforeNewsFunc)}},{key:"jumpDetail",value:function(e){var t=document.documentElement.scrollTop||document.body.scrollTop;this.props.saveScrollTopFunc(t),this.props.history.push("/details/"+e)}},{key:"toTitleDate",value:function(e){var t=(0,M.parseDate)(e);return(t.getFullYear()===(new Date).getFullYear()?"":t.getFullYear()+" 年")+" "+(t.getMonth()+1)+" 月 "+t.getDate()+" 日"}},{key:"componentWillUnmount",value:function(){console.log("news list componentWillUnmount"),(0,M.removeListenScrollBottom)()}},{key:"render",value:function(){var e=this,t=this.props.loadingError,n=t.loading,o=t.errorMsg,r=this.props.newsList,a=r.topStoryList,l=r.storyList;return m.default.createElement("div",{className:"news-list-container"},o&&m.default.createElement(y.default,{onOk:function(){return e.props.clearErrorMsgFunc()},onCancel:function(){return e.props.clearErrorMsgFunc()},title:"对话框",visible:!!o},m.default.createElement("p",null,o)),n&&m.default.createElement(_.default,null),m.default.createElement(O.default,null),a&&a.length>0&&m.default.createElement(L.default,{topStoryList:a}),m.default.createElement("div",{className:"news-list-box"},(l||[]).map(function(t,n,o){return m.default.createElement("div",{className:"news-item",key:t.id},0!==n&&t.date!==o[n-1].date&&m.default.createElement("h3",{className:"timeline"},e.toTitleDate(t.date)),m.default.createElement("div",{className:"item-link",onClick:function(){return e.jumpDetail(t.id)}},m.default.createElement("img",{src:t.images[0]}),m.default.createElement("div",{className:"title"},t.title),m.default.createElement("div",{className:"hint"},t.hint)))})))}}]),t}(d.Component),c.propTypes={newsList:h.default.object,loadingError:h.default.object,getLatestNewsFunc:h.default.func,clearErrorMsgFunc:h.default.func},i=s))||i;t.default=S},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,i,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(0),f=o(s),d=(n(4),n(1));o(d);n(78);var m=(i=u=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),c(t,[{key:"render",value:function(){var e=new Date,t=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"];return f.default.createElement("div",{className:"news-list-header"},f.default.createElement("div",{className:"time"},f.default.createElement("div",{className:"fw700"},e.getDate()),f.default.createElement("div",null,t[e.getMonth()])),f.default.createElement("h1",null,"知乎日报"))}}]),t}(s.Component),u.propTypes={},i);t.default=m},function(e,t){},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,i,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(0),f=o(s),d=n(4),m=n(1),p=o(m);n(80);var E=(i=u=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.jumpTo=n.jumpTo.bind(n),n.state={timerId:null,activeIndex:0},n}return l(t,e),c(t,[{key:"componentDidMount",value:function(){this.addIntervalEvent()}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timerId)}},{key:"addIntervalEvent",value:function(){var e=this,t=this.props.topStoryList.length;this.state.timerId=setInterval(function(){e.setState({activeIndex:(e.state.activeIndex+1)%t})},3200)}},{key:"jumpTo",value:function(e){clearInterval(this.state.timerId),this.setState({activeIndex:e}),this.addIntervalEvent()}},{key:"render",value:function(){var e=this,t=this.props.topStoryList,n=this.state.activeIndex,o={transform:"translateX("+-100*n+"%)"};return f.default.createElement("div",{className:"top-stories-box"},f.default.createElement("div",{className:"slider-box"},f.default.createElement("div",{className:"slider-inner",style:o},t.map(function(e){return f.default.createElement(d.Link,{to:"details/"+e.id,key:e.id,className:"slider-item"},f.default.createElement("img",{src:e.image}),f.default.createElement("div",{className:"content"},f.default.createElement("h3",null,e.title),f.default.createElement("span",null,e.hint)))})),f.default.createElement("ul",{className:"slider-nums"},t.map(function(t,o){return f.default.createElement("li",{onClick:function(){e.jumpTo(o)},key:t.id,className:n===o?"on":""})}))))}}]),t}(s.Component),u.propTypes={topStoryList:p.default.array},i);t.default=E},function(e,t){},function(e,t,n){"use strict";function o(){return function(e,t){return e((0,i.showLoading)()),u.default.get("/news/latest").then(function(t){e({type:c.GET_LATEST_NEWS,data:t}),e((0,i.hideLoading)())}).catch(function(t){e((0,i.setErrorMsg)(t.message.toString()))})}}function r(){return function(e,t){if(!t().loadingError.loading){e((0,i.showLoading)());var n=t().newsList.nowDate||(0,s.formatDate)(new Date);u.default.get("/news/before/"+n).then(function(t){e({type:c.GET_BEFORE_NEWS,data:t}),e((0,i.hideLoading)())}).catch(function(t){e((0,i.setErrorMsg)(t.message.toString()))})}}}function a(e){return{type:c.SAVE_SCROLLTOP,value:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getLatestNews=o,t.getBeforeNews=r,t.saveScrollTop=a;var l=n(17),u=function(e){return e&&e.__esModule?e:{default:e}}(l),i=n(9),c=n(28),s=n(18)},function(e,t){},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,i,c,s,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=n(0),m=o(d),p=n(10),E=(n(4),n(1)),h=o(E),g=n(15),_=o(g),v=n(16),y=o(v),b=n(33),O=o(b),w=n(84),L=n(34),N=n(9),T=n(18);n(85);var M=(u=(0,p.connect)(function(e){return{commentList:e.commentList,newsDetail:e.newsDetail,loadingError:e.loadingError}},function(e){return{getShortCommentListFunc:function(t){e((0,w.getShortCommentList)(t))},getLongCommentListFunc:function(t){e((0,w.getLongCommentList)(t))},getShortCommentListBeforeFunc:function(t){e((0,w.getShortCommentListBefore)(t))},getLongCommentListBeforeFunc:function(t){e((0,w.getLongCommentListBefore)(t))},getNewsExtraFunc:function(t){e((0,L.getNewsExtra)(t))},clearErrorMsgFunc:function(){e((0,N.clearErrorMsg)())}}}))((s=c=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return l(t,e),f(t,[{key:"componentDidMount",value:function(){document.documentElement.scrollTop=0;var e=this.props.match.params.id;this.props.getNewsExtraFunc(e),this.props.getLongCommentListFunc(e),this.props.getShortCommentListFunc(e);var t=this;(0,T.listenScrollBottom)(function(){t.props.getShortCommentListBeforeFunc(e)})}},{key:"componentWillUnmount",value:function(){console.log("comment list componentWillUnmount"),(0,T.removeListenScrollBottom)()}},{key:"render",value:function(){var e=this,t=this.props.loadingError,n=t.loading,o=t.errorMsg,r=this.props.commentList,a=r.longCommentList,l=r.shortCommentList,u=this.props.newsDetail.extra,i=u.commentCount,c=u.longCommentCount,s=u.shortCommentCount,f=i+" 条评论",d=void 0;a.length>0&&(d=a.map(function(e){return m.default.createElement("div",{className:"comment-item",key:e.id},m.default.createElement("img",{src:e.avatar,className:"avatar"}),m.default.createElement("div",{className:"comment-detail"},m.default.createElement("div",{className:"comment-author"},e.author),m.default.createElement("p",{className:"comment-content"},e.content),e.reply_to&&m.default.createElement("div",{className:"replay-to"},m.default.createElement("div",null,"// ",e.reply_to.author,": ",e.reply_to.content)),m.default.createElement("div",{className:"comment-other"},m.default.createElement("span",{className:"time"},(0,T.formatDate2)(new Date(e.time+"000"-0))),m.default.createElement("div",{className:"comment-judge"},m.default.createElement("i",{className:"fa fa-comment-o"})),m.default.createElement("div",{className:"comment-like"},m.default.createElement("span",null,e.likes),m.default.createElement("i",{className:"fa fa-thumbs-o-up"})))))}));var p=void 0;return l.length>0&&(p=l.map(function(e){return m.default.createElement("div",{className:"comment-item",key:e.id},m.default.createElement("img",{src:e.avatar,className:"avatar"}),m.default.createElement("div",{className:"comment-detail"},m.default.createElement("div",{className:"comment-author"},e.author),m.default.createElement("p",{className:"comment-content"},e.content),e.reply_to&&m.default.createElement("div",{className:"replay-to"},m.default.createElement("div",null,"// ",e.reply_to.author,": ",e.reply_to.content)),m.default.createElement("div",{className:"comment-other"},m.default.createElement("span",{className:"time"},(0,T.formatDate2)(new Date(e.time+"000"-0))),m.default.createElement("div",{className:"comment-judge"},m.default.createElement("i",{className:"fa fa-comment-o"})),m.default.createElement("div",{className:"comment-like"},m.default.createElement("span",null,e.likes),m.default.createElement("i",{className:"fa fa-thumbs-o-up"})))))})),m.default.createElement("div",{className:"comment-container"},o&&m.default.createElement(y.default,{onOk:function(){return e.props.clearErrorMsgFunc()},onCancel:function(){return e.props.clearErrorMsgFunc()},title:"对话框",visible:!!o},m.default.createElement("p",null,o)),n&&m.default.createElement(_.default,null),m.default.createElement(O.default,{title:f,goBack:this.props.history.goBack}),m.default.createElement("div",{className:"comment-box"},a.length>0&&m.default.createElement("div",{className:"comment-title"},c," 条长评"),d,l.length>0&&m.default.createElement("div",{className:"comment-title"},s," 条短评"),p))}}]),t}(d.Component),c.propTypes={commentList:h.default.object,newsDetail:h.default.object,loadingError:h.default.object,getNewsExtraFunc:h.default.func,getShortCommentListFunc:h.default.func,getLongCommentListFunc:h.default.func,getShortCommentListBeforeFunc:h.default.func,getLongCommentListBeforeFunc:h.default.func,clearErrorMsgFunc:h.default.func},i=s))||i;t.default=M},function(e,t,n){"use strict";function o(e){return function(t,n){t((0,c.showLoading)()),i.default.get("/story/"+e+"/short-comments").then(function(e){t({type:s.GET_SHORT_COMMENT_LIST,data:e}),t((0,c.hideLoading)())}).catch(function(e){t((0,c.setErrorMsg)(e.message.toString()))})}}function r(e){return function(t,n){t((0,c.showLoading)()),i.default.get("/story/"+e+"/long-comments").then(function(e){t({type:s.GET_LONG_COMMENT_LIST,data:e}),t((0,c.hideLoading)())}).catch(function(e){t((0,c.setErrorMsg)(e.message.toString()))})}}function a(e){return function(t,n){if(!n().loadingError.loading){var o=n().commentList.shortCommentList,r=void 0;o.length>0&&(r=o[o.length-1].id),r&&(t((0,c.showLoading)()),i.default.get("/story/"+e+"/short-comments/before/"+r).then(function(e){t({type:s.GET_SHORT_COMMENT_LIST_BEFORE,data:e}),t((0,c.hideLoading)())}).catch(function(e){t((0,c.setErrorMsg)(e.message.toString()))}))}}}function l(e){return function(t,n){if(!n().loadingError.loading){var o=n().commentList.longCommentList,r=void 0;o.length>0&&(r=o[o.length-1].id),r&&(t((0,c.showLoading)()),i.default.get("/story/"+e+"/long-comments/before/"+r).then(function(e){t({type:s.GET_LONG_COMMENT_LIST_BEFORE,data:e}),t((0,c.hideLoading)())}).catch(function(e){t((0,c.setErrorMsg)(e.message.toString()))}))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.getShortCommentList=o,t.getLongCommentList=r,t.getShortCommentListBefore=a,t.getLongCommentListBefore=l;var u=n(17),i=function(e){return e&&e.__esModule?e:{default:e}}(u),c=n(9),s=n(30)},function(e,t){},function(e,t){}],[36]);
//# sourceMappingURL=app.0cdb675b.js.map