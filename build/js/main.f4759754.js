!function(t){function e(e){for(var r,a,i=e[0],u=e[1],l=e[2],f=0,p=[];f<i.length;f++)a=i[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);for(s&&s(e);p.length;)p.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],r=!0,i=1;i<n.length;i++){var u=n[i];0!==o[u]&&(r=!1)}r&&(c.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={0:0},c=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var i=window.webpackJsonp=window.webpackJsonp||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var s=u;c.push([57,1]),n()}({44:function(t,e,n){},45:function(t,e,n){},46:function(t,e,n){},48:function(t,e,n){},51:function(t,e,n){},52:function(t,e,n){},53:function(t,e,n){},54:function(t,e,n){},56:function(t,e,n){},57:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),c=n(21),a=n.n(c),i=n(6),u=n(7),l=n(24);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m={loading:!1,errorMsg:""};function y(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v={nowDate:null,scrollTop:0,topStoryList:[],storyList:[]};function E(t,e){return t.map((function(t){return h({},t,{date:e})}))}function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S={body:"",title:"",image:"",imageSource:"",extra:{longCommentCount:0,popularityCount:0,shortCommentCount:0,commentCount:0}};function j(t){return function(t){if(Array.isArray(t))return N(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C={shortCommentList:[],longCommentList:[]},P=Object(u.c)({loadingError:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SHOW_LOADING":return f({},t,{loading:!0,errorMsg:""});case"HIDE_LOADING":return f({},t,{loading:!1});case"SET_ERROR_MSG":return f({},t,{loading:!1,errorMsg:e.errorMsg});case"CLEAR_ERROR_MSG":return f({},t,{errorMsg:""});default:return t}},newsList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_LATEST_NEWS":return h({},t,{nowDate:e.data.date,topStoryList:e.data.top_stories,storyList:[].concat(y(t.storyList),y(E(e.data.stories,e.data.date)))});case"GET_BEFORE_NEWS":return h({},t,{nowDate:e.data.date,storyList:[].concat(y(t.storyList),y(E(e.data.stories,e.data.date)))});case"SAVE_SCROLLTOP":return h({},t,{scrollTop:e.value});default:return t}},newsDetail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_NEWS_DETAIL":return w({},t,{body:e.data.body,title:e.data.title,image:e.data.image,imageSource:e.data.image_source});case"GET_NEWS_EXTRA":return w({},t,{extra:{longCommentCount:e.data.long_comments,popularityCount:e.data.popularity,shortCommentCount:e.data.short_comments,commentCount:e.data.comments}});default:return t}},commentList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_SHORT_COMMENT_LIST":return D({},t,{shortCommentList:e.data.comments});case"GET_LONG_COMMENT_LIST":return D({},t,{longCommentList:e.data.comments});case"GET_SHORT_COMMENT_LIST_BEFORE":return D({},t,{shortCommentList:[].concat(j(t.shortCommentList),j(e.data.comments))});case"GET_LONG_COMMENT_LIST_BEFORE":return D({},t,{longCommentList:[].concat(j(t.longCommentList),j(e.data.comments))});default:return t}}}),R=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,k=Object(u.e)(P,R(Object(u.a)(l.a))),I=n(60),M=n(59),F=n(58),x=n(2),G=n.n(x);n(44);function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function B(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function W(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(i,t);var e,n,r,c,a=(e=i,function(){var t,n=U(e);if(W()){var r=U(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return B(this,t)});function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,t)}return n=i,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"loading-container ".concat(this.props.isFull?"is-full":"")},o.a.createElement("div",{className:"loading-mask"}),o.a.createElement("div",{className:"loading-box"},o.a.createElement("span",null),o.a.createElement("span",null),o.a.createElement("span",null),o.a.createElement("span",null)))}}])&&H(n.prototype,r),c&&H(n,c),i}(r.Component);n(45);function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $(t,e){return!e||"object"!==Y(e)&&"function"!=typeof e?J(t):e}function J(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q(t,e)}(i,t);var e,n,r,c,a=(e=i,function(){var t,n=q(e);if(z()){var r=q(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return $(this,t)});function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this,t)).state={confirmLoading:!1},e.onOk=e.onOk.bind(J(e)),e.onCancel=e.onCancel.bind(J(e)),e.handleKeyDown=e.handleKeyDown.bind(J(e)),e}return n=i,(r=[{key:"componentDidMount",value:function(){var t=this;this.modalContentRef.focus(),this.maskRef.onclick=function(){t.onCancel()}}},{key:"handleKeyDown",value:function(t){27===t.keyCode&&this.onCancel()}},{key:"onOk",value:function(){if(!this.props.confirmLoading){var t=this.props.onOk;"function"==typeof t&&t()}}},{key:"onCancel",value:function(){var t=this.props.onCancel;"function"==typeof t&&t()}},{key:"render",value:function(){var t=this,e=this.props,n=e.title,r=e.children,c=this.props,a=c.visible,i=c.confirmLoading;return n=n||"提示",o.a.createElement("div",{className:"modal-box ".concat(a?"":"hide")},o.a.createElement("div",{className:"modal-mask",ref:function(e){return t.maskRef=e}}),o.a.createElement("div",{className:"modal-content",ref:function(e){return t.modalContentRef=e},tabIndex:"0",onKeyDown:this.handleKeyDown},o.a.createElement("div",{className:"modal-header"},n,o.a.createElement("i",{onClick:this.onCancel,className:"right"},"x")),o.a.createElement("div",{className:"modal-body"},r),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{onClick:this.onCancel,className:"btn default mr10"},"取消"),o.a.createElement("button",{onClick:this.onOk,className:"btn ".concat(i?"disabled":"")},"确定"))))}}])&&V(n.prototype,r),c&&V(n,c),i}(r.Component);n(46);function tt(t){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rt(t,e){return!e||"object"!==tt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ot(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var it=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}(i,t);var e,n,r,c,a=(e=i,function(){var t,n=ct(e);if(ot()){var r=ct(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return rt(this,t)});function i(){return et(this,i),a.apply(this,arguments)}return n=i,(r=[{key:"render",value:function(){var t=this.props,e=t.className,n=t.children,r=t.title;return o.a.createElement("div",{className:"header ".concat(e)},this.props.goBack&&o.a.createElement("a",{className:"goback",onClick:this.props.goBack},o.a.createElement("i",{className:"fa fa-chevron-left"})),r&&o.a.createElement("h1",null,r),n)}}])&&nt(n.prototype,r),c&&nt(n,c),i}(r.Component);it.propTypes={};var ut=n(17),lt=n.n(ut),st="";st="https://cors-anywhere.herokuapp.com/https://news-at.zhihu.com/api/4";var ft=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(e,n){lt()(st+t,{method:"GET"}).then((function(t){return e(t.json())})).catch((function(t){return n({message:t})}))}))};function pt(t){return{type:"SET_ERROR_MSG",errorMsg:t}}function mt(t){return function(e,n){e({type:"SHOW_LOADING"}),ft("/story-extra/".concat(t)).then((function(t){e({type:"GET_NEWS_EXTRA",data:t}),e({type:"HIDE_LOADING"})})).catch((function(t){e(pt(t.message))}))}}var yt,dt,bt;n(48);function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vt(t,e){return!e||"object"!==ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Et(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _t=Object(i.b)((function(t){return{newsDetail:t.newsDetail,loadingError:t.loadingError}}),(function(t){return{getNewsDetailFunc:function(e){t(function(t){return function(e,n){e({type:"SHOW_LOADING"}),ft("/news/".concat(t)).then((function(t){e({type:"GET_NEWS_DETAIL",data:t}),e({type:"HIDE_LOADING"})})).catch((function(t){e(pt(t.message))}))}}(e))},getNewsExtraFunc:function(e){t(mt(e))},clearErrorMsgFunc:function(){t({type:"CLEAR_ERROR_MSG"})}}}))((bt=dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wt(t,e)}(i,t);var e,n,r,c,a=(e=i,function(){var t,n=Ot(e);if(Et()){var r=Ot(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return vt(this,t)});function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,t)}return n=i,(r=[{key:"componentDidMount",value:function(){document.documentElement.scrollTop=0;var t=this.props.match.params.id;this.props.getNewsDetailFunc(t),this.props.getNewsExtraFunc(t)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var t=this,e=this.props.loadingError,n=e.loading,r=e.errorMsg,c=this.props.newsDetail,a=c.title,i=c.body,u=c.image,l=c.imageSource,s=c.extra;return o.a.createElement("div",{className:"detail-box"},r&&o.a.createElement(Z,{onOk:function(){return t.props.clearErrorMsgFunc()},onCancel:function(){return t.props.clearErrorMsgFunc()},title:"对话框",visible:!!r},o.a.createElement("p",null,r)),n&&o.a.createElement(X,null),o.a.createElement(it,{goBack:this.props.history.goBack,className:"detail-header"},o.a.createElement("div",{className:"line"}),o.a.createElement("div",{className:"right ml30"},o.a.createElement(F.a,{to:"/details/".concat(this.props.match.params.id,"/comments"),className:"func-btn"},o.a.createElement("i",{className:"fa fa-comment-o"}),o.a.createElement("span",null,s.commentCount)),o.a.createElement("div",{className:"func-btn"},o.a.createElement("i",{className:"fa fa-thumbs-o-up"}),o.a.createElement("span",null,s.popularityCount)))),o.a.createElement("div",{className:"detail-img-box"},o.a.createElement("img",{src:u}),o.a.createElement("div",{className:"detail-overlay"}),o.a.createElement("h2",null,a),o.a.createElement("span",null,l)),o.a.createElement("div",{dangerouslySetInnerHTML:{__html:i},className:"detail-content-box"}))}}])&&gt(n.prototype,r),c&&gt(n,c),i}(r.Component),dt.propTypes={newsDetail:G.a.object,loadingError:G.a.object,getNewsDetailFunc:G.a.func,getNewsExtraFunc:G.a.func,clearErrorMsgFunc:G.a.func},yt=bt))||yt;n(51);function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(t,e){return!e||"object"!==St(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ct(t,e){return(Ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ct(t,e)}(i,t);var e,n,r,c,a=(e=i,function(){var t,n=Tt(e);if(Dt()){var r=Tt(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Lt(this,t)});function i(){return jt(this,i),a.apply(this,arguments)}return n=i,(r=[{key:"render",value:function(){var t=new Date;return o.a.createElement("div",{className:"news-list-header"},o.a.createElement("div",{className:"time"},o.a.createElement("div",{className:"fw700"},t.getDate()),o.a.createElement("div",null,["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][t.getMonth()])),o.a.createElement("h1",null,"知乎日报"))}}])&&Nt(n.prototype,r),c&&Nt(n,c),i}(r.Component);Pt.propTypes={};n(52);function Rt(t){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function It(t,e){return!e||"object"!==Rt(e)&&"function"!=typeof e?Mt(t):e}function Mt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ft(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gt(t,e){return(Gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var At,Ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gt(t,e)}(i,t);var e,n,r,c,a=(e=i,function(){var t,n=xt(e);if(Ft()){var r=xt(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return It(this,t)});function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this,t)).jumpTo=e.jumpTo.bind(Mt(e)),e.state={timerId:null,activeIndex:0},e}return n=i,(r=[{key:"componentDidMount",value:function(){this.addIntervalEvent()}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timerId)}},{key:"addIntervalEvent",value:function(){var t=this,e=this.props.topStoryList.length;this.state.timerId=setInterval((function(){t.setState({activeIndex:(t.state.activeIndex+1)%e})}),3200)}},{key:"jumpTo",value:function(t){clearInterval(this.state.timerId),this.setState({activeIndex:t}),this.addIntervalEvent()}},{key:"render",value:function(){var t=this,e=this.props.topStoryList,n=this.state.activeIndex,r={transform:"translateX(".concat(-100*n,"%)")};return o.a.createElement("div",{className:"top-stories-box"},o.a.createElement("div",{className:"slider-box"},o.a.createElement("div",{className:"slider-inner",style:r},e.map((function(t){return o.a.createElement(F.a,{to:"details/".concat(t.id),key:t.id,className:"slider-item"},o.a.createElement("img",{src:t.image}),o.a.createElement("div",{className:"content"},o.a.createElement("h3",null,t.title),o.a.createElement("span",null,t.hint)))}))),o.a.createElement("ul",{className:"slider-nums"},e.map((function(e,r){return o.a.createElement("li",{onClick:function(){t.jumpTo(r)},key:e.id,className:n===r?"on":""})})))))}}])&&kt(n.prototype,r),c&&kt(n,c),i}(r.Component);function Bt(t){var e=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),o=t.getHours(),c=t.getMinutes();return n<10&&(n="0"+n),r<10&&(r="0"+r),o<10&&(o="0"+o),c<10&&(c="0"+c),"".concat(e,"-").concat(n,"-").concat(r," ").concat(o,":").concat(c)}function Wt(t){At=function(){var e=document.documentElement.scrollTop||document.body.scrollTop;0!==e&&e+document.documentElement.clientHeight===document.documentElement.scrollHeight&&t()},window.addEventListener("scroll",At)}function Ut(){window.removeEventListener("scroll",At)}Ht.propTypes={topStoryList:G.a.array};var Kt,Xt,Yt;n(53);function Vt(t){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jt(t,e){return!e||"object"!==Vt(e)&&"function"!=typeof e?zt(t):e}function zt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Qt(t){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zt(t,e){return(Zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var te=Object(i.b)((function(t){return{newsList:t.newsList,loadingError:t.loadingError}}),(function(t){return{getLatestNewsFunc:function(){return t((function(t,e){return t({type:"SHOW_LOADING"}),ft("/news/latest").then((function(e){t({type:"GET_LATEST_NEWS",data:e}),t({type:"HIDE_LOADING"})})).catch((function(e){t(pt(e.message.toString()))}))}))},getBeforeNewsFunc:function(){t((function(t,e){if(!e().loadingError.loading){t({type:"SHOW_LOADING"});var n,r,o,c,a=e().newsList.nowDate||(n=new Date,r=n.getFullYear(),o=n.getMonth()+1,c=n.getDate(),o<10&&(o="0"+o),c<10&&(c="0"+c),r+o+c);ft("/news/before/".concat(a)).then((function(e){t({type:"GET_BEFORE_NEWS",data:e}),t({type:"HIDE_LOADING"})})).catch((function(e){t(pt(e.message.toString()))}))}}))},saveScrollTopFunc:function(e){t({type:"SAVE_SCROLLTOP",value:e})},clearErrorMsgFunc:function(){t({type:"CLEAR_ERROR_MSG"})}}}))((Yt=Xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zt(t,e)}(i,t);var e,n,r,c,a=(e=i,function(){var t,n=Qt(e);if(qt()){var r=Qt(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Jt(this,t)});function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this,t)).jumpDetail=e.jumpDetail.bind(zt(e)),e.addEvent=e.addEvent.bind(zt(e)),e}return n=i,(r=[{key:"componentDidMount",value:function(){var t=this,e=this.props.newsList,n=e.storyList,r=e.scrollTop;console.log("list componentDidMount",r),this.addEvent(),n.length>0?document.documentElement.scrollTop=r:this.props.getLatestNewsFunc().then((function(){t.props.getBeforeNewsFunc()}))}},{key:"addEvent",value:function(){Wt(this.props.getBeforeNewsFunc)}},{key:"jumpDetail",value:function(t){var e=document.documentElement.scrollTop||document.body.scrollTop;this.props.saveScrollTopFunc(e),this.props.history.push("/details/".concat(t))}},{key:"toTitleDate",value:function(t){var e=function(t){if(!/^(\d){8}$/.test(t))throw"invalid date";var e=t.substr(0,4),n=t.substr(4,2)-1,r=t.substr(6,2);return new Date(e,n,r)}(t),n=e.getFullYear()===(new Date).getFullYear()?"":e.getFullYear()+" 年";return"".concat(n," ").concat(e.getMonth()+1," 月 ").concat(e.getDate()," 日")}},{key:"componentWillUnmount",value:function(){Ut()}},{key:"render",value:function(){var t=this,e=this.props.loadingError,n=e.loading,r=e.errorMsg,c=this.props.newsList,a=c.topStoryList,i=c.storyList;return o.a.createElement("div",{className:"news-list-container"},r&&o.a.createElement(Z,{onOk:function(){return t.props.clearErrorMsgFunc()},onCancel:function(){return t.props.clearErrorMsgFunc()},title:"对话框",visible:!!r},o.a.createElement("p",null,r)),n&&o.a.createElement(X,null),o.a.createElement(Pt,null),a&&a.length>0&&o.a.createElement(Ht,{topStoryList:a}),o.a.createElement("div",{className:"news-list-box"},(i||[]).map((function(e,n,r){return o.a.createElement("div",{className:"news-item",key:e.id},0!==n&&e.date!==r[n-1].date&&o.a.createElement("h3",{className:"timeline"},t.toTitleDate(e.date)),o.a.createElement("div",{className:"item-link",onClick:function(){return t.jumpDetail(e.id)}},o.a.createElement("img",{src:e.images[0]}),o.a.createElement("div",{className:"title"},e.title),o.a.createElement("div",{className:"hint"},e.hint)))}))))}}])&&$t(n.prototype,r),c&&$t(n,c),i}(r.Component),Xt.propTypes={newsList:G.a.object,loadingError:G.a.object,getLatestNewsFunc:G.a.func,clearErrorMsgFunc:G.a.func},Kt=Yt))||Kt;var ee,ne,re;n(54);function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ae(t,e){return!e||"object"!==oe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ie(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ue(t){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function le(t,e){return(le=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var se=Object(i.b)((function(t){return{commentList:t.commentList,newsDetail:t.newsDetail,loadingError:t.loadingError}}),(function(t){return{getShortCommentListFunc:function(e){var n;t((n=e,function(t,e){t({type:"SHOW_LOADING"}),ft("/story/".concat(n,"/short-comments")).then((function(e){t({type:"GET_SHORT_COMMENT_LIST",data:e}),t({type:"HIDE_LOADING"})})).catch((function(e){t(pt(e.message.toString()))}))}))},getLongCommentListFunc:function(e){var n;t((n=e,function(t,e){t({type:"SHOW_LOADING"}),ft("/story/".concat(n,"/long-comments")).then((function(e){t({type:"GET_LONG_COMMENT_LIST",data:e}),t({type:"HIDE_LOADING"})})).catch((function(e){t(pt(e.message.toString()))}))}))},getShortCommentListBeforeFunc:function(e){t(function(t){return function(e,n){if(!n().loadingError.loading){var r,o=n().commentList.shortCommentList;o.length>0&&(r=o[o.length-1].id),r&&(e({type:"SHOW_LOADING"}),ft("/story/".concat(t,"/short-comments/before/").concat(r)).then((function(t){e({type:"GET_SHORT_COMMENT_LIST_BEFORE",data:t}),e({type:"HIDE_LOADING"})})).catch((function(t){e(pt(t.message.toString()))})))}}}(e))},getLongCommentListBeforeFunc:function(e){t(function(t){return function(e,n){if(!n().loadingError.loading){var r,o=n().commentList.longCommentList;o.length>0&&(r=o[o.length-1].id),r&&(e({type:"SHOW_LOADING"}),ft("/story/".concat(t,"/long-comments/before/").concat(r)).then((function(t){e({type:"GET_LONG_COMMENT_LIST_BEFORE",data:t}),e({type:"HIDE_LOADING"})})).catch((function(t){e(pt(t.message.toString()))})))}}}(e))},getNewsExtraFunc:function(e){t(mt(e))},clearErrorMsgFunc:function(){t({type:"CLEAR_ERROR_MSG"})}}}))((re=ne=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&le(t,e)}(i,t);var e,n,r,c,a=(e=i,function(){var t,n=ue(e);if(ie()){var r=ue(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return ae(this,t)});function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,t)}return n=i,(r=[{key:"componentDidMount",value:function(){document.documentElement.scrollTop=0;var t=this.props.match.params.id;this.props.getNewsExtraFunc(t),this.props.getLongCommentListFunc(t),this.props.getShortCommentListFunc(t);var e=this;Wt((function(){e.props.getShortCommentListBeforeFunc(t)}))}},{key:"componentWillUnmount",value:function(){Ut()}},{key:"render",value:function(){var t,e,n=this,r=this.props.loadingError,c=r.loading,a=r.errorMsg,i=this.props.commentList,u=i.longCommentList,l=i.shortCommentList,s=this.props.newsDetail.extra,f=s.commentCount,p=s.longCommentCount,m=s.shortCommentCount,y=f+" 条评论";return u.length>0&&(t=u.map((function(t){return o.a.createElement("div",{className:"comment-item",key:t.id},o.a.createElement("img",{src:t.avatar,className:"avatar"}),o.a.createElement("div",{className:"comment-detail"},o.a.createElement("div",{className:"comment-author"},t.author),o.a.createElement("p",{className:"comment-content"},t.content),t.reply_to&&o.a.createElement("div",{className:"replay-to"},o.a.createElement("div",null,"// ",t.reply_to.author,": ",t.reply_to.content)),o.a.createElement("div",{className:"comment-other"},o.a.createElement("span",{className:"time"},Bt(new Date(t.time+"000"-0))),o.a.createElement("div",{className:"comment-judge"},o.a.createElement("i",{className:"fa fa-comment-o"})),o.a.createElement("div",{className:"comment-like"},o.a.createElement("span",null,t.likes),o.a.createElement("i",{className:"fa fa-thumbs-o-up"})))))}))),l.length>0&&(e=l.map((function(t){return o.a.createElement("div",{className:"comment-item",key:t.id},o.a.createElement("img",{src:t.avatar,className:"avatar"}),o.a.createElement("div",{className:"comment-detail"},o.a.createElement("div",{className:"comment-author"},t.author),o.a.createElement("p",{className:"comment-content"},t.content),t.reply_to&&o.a.createElement("div",{className:"replay-to"},o.a.createElement("div",null,"// ",t.reply_to.author,": ",t.reply_to.content)),o.a.createElement("div",{className:"comment-other"},o.a.createElement("span",{className:"time"},Bt(new Date(t.time+"000"-0))),o.a.createElement("div",{className:"comment-judge"},o.a.createElement("i",{className:"fa fa-comment-o"})),o.a.createElement("div",{className:"comment-like"},o.a.createElement("span",null,t.likes),o.a.createElement("i",{className:"fa fa-thumbs-o-up"})))))}))),o.a.createElement("div",{className:"comment-container"},a&&o.a.createElement(Z,{onOk:function(){return n.props.clearErrorMsgFunc()},onCancel:function(){return n.props.clearErrorMsgFunc()},title:"对话框",visible:!!a},o.a.createElement("p",null,a)),c&&o.a.createElement(X,null),o.a.createElement(it,{title:y,goBack:this.props.history.goBack}),o.a.createElement("div",{className:"comment-box"},u.length>0&&o.a.createElement("div",{className:"comment-title"},p," 条长评"),t,l.length>0&&o.a.createElement("div",{className:"comment-title"},m," 条短评"),e))}}])&&ce(n.prototype,r),c&&ce(n,c),i}(r.Component),ne.propTypes={commentList:G.a.object,newsDetail:G.a.object,loadingError:G.a.object,getNewsExtraFunc:G.a.func,getShortCommentListFunc:G.a.func,getLongCommentListFunc:G.a.func,getShortCommentListBeforeFunc:G.a.func,getLongCommentListBeforeFunc:G.a.func,clearErrorMsgFunc:G.a.func},ee=re))||ee,fe=function(){return o.a.createElement(I.a,null,o.a.createElement("div",null,o.a.createElement(M.a,{exact:!0,path:"/",component:te}),o.a.createElement(M.a,{exact:!0,path:"/details/:id",component:_t}),o.a.createElement(M.a,{path:"/details/:id/comments",component:se})))};n(56);a.a.render(o.a.createElement(i.a,{store:k},o.a.createElement(fe,null)),document.getElementById("app"))}});